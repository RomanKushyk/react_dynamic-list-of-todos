(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],[,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var c,n=s(4),o=s.n(n),r=s(2),a=s(1),i=s.n(a),d=(s(9),s(10),s(11),s(12),function(e,t){return fetch("".concat("https://mate.academy/students-api").concat(e),t).then((function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText));return e.json()}))}),l=s(0);!function(e){e.all="all",e.active="active",e.completed="completed"}(c||(c={}));var u=i.a.createContext({todos:[],setTodos:function(){},todoTitle:"",setTodoTitle:function(){},todoStatus:c.all,setTodoStatus:function(){},hasLoadingError:!1,setHasLoadingError:function(){}}),j=function(e){var t=e.children,s=Object(a.useState)([]),n=Object(r.a)(s,2),o=n[0],i=n[1],j=Object(a.useState)(""),b=Object(r.a)(j,2),h=b[0],m=b[1],O=Object(a.useState)(c.all),f=Object(r.a)(O,2),p=f[0],x=f[1],_=Object(a.useState)(!1),v=Object(r.a)(_,2),T=v[0],N=v[1];Object(a.useEffect)((function(){d("/todos").then((function(e){return i(e)}))}),[]);var g=Object(a.useMemo)((function(){return{todos:o,setTodos:i,todoTitle:h,setTodoTitle:m,todoStatus:p,setTodoStatus:x,hasLoadingError:T,setHasLoadingError:N}}),[o,h,p,T]);return Object(l.jsx)(u.Provider,{value:g,children:t})},b=Object(a.memo)((function(e){var t=e.selectedUserId,s=e.setSelectedUserId,n=Object(a.useContext)(u),o=n.todos,r=n.todoStatus,i=n.setTodoStatus,d=n.todoTitle,j=n.setTodoTitle,b=function(e){var t=e.target,s=t.value;switch(t.name){case"todos-status-selector":i(s);break;case"todos-title-input":j(s)}},h=Object(a.useMemo)((function(){return o.filter((function(e){var t=e.title.toLowerCase(),s=d.toLowerCase();return t.includes(s)&&function(t){switch(t){case c.active:return!1===e.completed;case c.completed:return!0===e.completed;default:return!0}}(r)}))}),[d,r,o]);return Object(l.jsx)(l.Fragment,{children:o.length<=0?"Todos are loading":Object(l.jsxs)("div",{className:"TodoList",children:[Object(l.jsx)("h2",{children:"Todos:"}),Object(l.jsxs)("div",{className:"TodoList__list-container",children:[Object(l.jsxs)("form",{className:"TodoList__form form",children:[Object(l.jsx)("input",{type:"text",id:"todos-title-input",name:"todos-title-input",className:"form__title-input",value:d,onChange:b}),Object(l.jsx)("select",{id:"todos-status-selector",name:"todos-status-selector",className:"form__status-selector",value:r,onChange:b,children:Object.keys(c).map((function(e){return Object(l.jsx)("option",{value:e,children:e})}))})]}),Object(l.jsx)("ul",{className:"TodoList__list",children:h.map((function(e){return Object(l.jsxs)("li",{className:"TodoList__item TodoList__item--".concat(e.completed?"checked":"unchecked"),children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{type:"checkbox",checked:e.completed,readOnly:!0}),Object(l.jsx)("p",{children:e.title})]}),Object(l.jsx)("button",{className:"TodoList__user-button button "+"TodoList__user-button--".concat(e.userId===t&&"selected"),type:"button",onClick:function(){return s(e.userId)},children:"User #".concat(e.userId)})]},e.id)}))})]})]})})})),h=(s(14),s(15),function(){return Object(l.jsx)("div",{className:"LoadingError",children:"An error occurred when loading user!"})}),m=Object(a.memo)((function(e){var t=e.selectedUserId,s=e.setSelectedUserId,c=Object(a.useState)(null),n=Object(r.a)(c,2),o=n[0],i=n[1],j=Object(a.useContext)(u),b=j.hasLoadingError,m=j.setHasLoadingError;return Object(a.useEffect)((function(){var e;m(!1),i(null),(e=t,d("/users/".concat(e))).then((function(e){return i(e)})).catch((function(){return m(!0)}))}),[t,s,m]),Object(l.jsx)(l.Fragment,{children:o?Object(l.jsxs)("div",{className:"CurrentUser",children:[Object(l.jsx)("h2",{className:"CurrentUser__title",children:Object(l.jsx)("span",{children:"Selected user: ".concat(null===o||void 0===o?void 0:o.id)})}),Object(l.jsx)("h3",{className:"CurrentUser__name",children:null===o||void 0===o?void 0:o.name}),Object(l.jsx)("p",{className:"CurrentUser__email",children:null===o||void 0===o?void 0:o.email}),Object(l.jsx)("p",{className:"CurrentUser__phone",children:null===o||void 0===o?void 0:o.phone}),Object(l.jsx)("button",{className:" CurrentUser__clear button ",type:"button",onClick:function(){return s(0)},children:"Clear"})]}):b?Object(l.jsx)(h,{}):"User is loading"})})),O=function(){var e=Object(a.useState)(0),t=Object(r.a)(e,2),s=t[0],c=t[1];return Object(l.jsx)(j,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("div",{className:"App__sidebar",children:Object(l.jsx)(b,{selectedUserId:s,setSelectedUserId:c})}),Object(l.jsx)("div",{className:"App__content",children:Object(l.jsx)("div",{className:"App__content-container",children:s?Object(l.jsx)(m,{selectedUserId:s,setSelectedUserId:c}):"No user selected"})})]})})};o.a.render(Object(l.jsx)(O,{}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.531b1f4f.chunk.js.map